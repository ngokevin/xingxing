<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<form id="form" action="http://www.cantonese.sheik.co.uk/scripts/wordsearch.php?level=0" method="post" target="frameCanto">
  <input name="TEXT" type="text" placeholder="Input word...">
  <input name="SEARCHTYPE" id="searchType" type="hidden">
  <input name="radicaldropdown" type="hidden" value="0">
  <input name="searchsubmit" type="hidden" value="search">
</form>

<div class="frames">
  <div class="frameColumn">
    <iframe id="frameAnki" src="https://ankiuser.net/edit/"></iframe>
    <iframe id="frameTranslate" src="https://translate.google.com/#view=home&op=translate&sl=en&tl=zh-CN"></iframe>
  </div>
  <div class="frameColumn">
    <iframe id="frameCanto" name="frameCanto" src="http://www.cantonese.sheik.co.uk/scripts/most_used_chars.php"></iframe>
    <iframe id="frameArch" name="frameArch" src="https://www.archchinese.com/chinese_english_dictionary.html"></iframe>
  </div>
  <iframe id="frameWritten" src="https://www.writtenchinese.com/category/vocabulary/"></iframe>
</div>

<style>
  html,
  body {
    background: #666;
    display: flex;
    flex-direction: column;
    height: 100%;
    margin-top: 0;
    overflow: hidden;
    width: 100%;
  }

  body {
    margin-top: 5px;
  }

  form {
    margin: 0;
    padding: 0;
    width: 100%;
  }

  input {
    border: 1px solid #555;
    border-radius: 5px;
    margin: 10px auto;
    padding: 10px 20px;
    width: calc(100% - 20px);
  }

  .frames {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    height: 100%;
    width: 99%;
  }

  iframe {
    border: 1px solid #555;
    border-radius: 2px;
    height: 100%;
    margin: 2px;
    padding: 0;
    width: 33%;
  }

  .frameColumn {
    height: 100%;
    margin-right: 5px;
    width: 33%;
  }

  .frameColumn iframe {
    height: 50%;
    width: 100%;
  }
</style>

<script>
  const input = document.querySelector('input');
  const form = document.getElementById('form');
  const frameArch = document.getElementById('frameArch');
  const frameCanto = document.getElementById('frameCanto');
  const frameTranslate = document.getElementById('frameTranslate');
  const frameWritten = document.getElementById('frameWritten');
  const searchType = document.getElementById('searchType');

  const chiRe = /[\u3400-\u9FBF]/;
  input.addEventListener('change', () => {
    const val = input.value;

    if (val.match(chiRe)) {
      frameTranslate.setAttribute(
        'src',
        `https://translate.google.com/#view=home&op=translate&sl=zh-CN&tl=en&text=${val}`
      );
      searchType.value = "1";
    } else {
      frameTranslate.setAttribute(
        'src',
        `https://translate.google.com/#view=home&op=translate&sl=en&tl=zh-CN&text=${val}`
      );
      searchType.value = "4";
    }

    frameWritten.setAttribute(
      'src',
      `https://dictionary.writtenchinese.com/#sk=${val}&svt=pinyin`
    );

    frameArch.setAttribute(
      'src',
      `https://www.archchinese.com/chinese_english_dictionary.html?find=${val}`
    );

    form.submit();
  });

  form.addEventListener('submit', evt => {
    evt.preventDefault();
  });
</script>
